## Зміст

- [Основні Компоненти](#основні-компоненти)
  - [Рендеринговий Двигун](#рендеринговий-двигун)
  - [JavaScript-Двигун](#javascript-двигун)
  - [Мережева Підсистема](#мережева-підсистема)
  - [Модель Процесів та Потоків](#модель-процесів-та-потоків)
  - [Подієвий Цикл (Event Loop)](#подієвий-цикл-event-loop)
  - [Зберігання Даних на Стороні Клієнта](#зберігання-даних-на-стороні-клієнта)
- [Ключові Терміни та Протоколи](#ключові-терміни-та-протоколи)
  - [IP та DNS](#ip-та-dns)
  - [HTTP та HTTPS](#http-та-https)
  - [TLS](#tls)
  - [HTTP: Заголовки та Тіло](#http-заголовки-та-тіло)
- [Структура HTTP-Запиту та Відповіді](#структура-http-запиту-та-відповіді)
- [Детальний Процес Рендерингу Веб-Сторінки](#детальний-процес-рендерингу-веб-сторінки)
  - [1. Отримання Ресурсів](#1-отримання-ресурсів)
  - [2. Парсинг HTML та Побудова DOM-дерева](#2-парсинг-html-та-побудова-dom-дерева)
  - [3. Парсинг CSS та Побудова CSSOM-дерева](#3-парсинг-css-та-побудова-cssom-дерева)
  - [4. Побудова Render Tree](#4-побудова-render-tree)
  - [5. Layout (Обчислення Макету)](#5-layout-обчислення-макету)
  - [6. Painting (Малювання)](#6-painting-малювання)
  - [7. Compositing (Композиція)](#7-compositing-композиція)
  - [8. Виконання JavaScript та Оновлення DOM](#8-виконання-javascript-та-оновлення-dom)
  - [9. Асинхронні Операції](#9-асинхронні-операції)
- [Додаткові Механізми та Оптимізації](#додаткові-механізми-та-оптимізації)
  - [Service Workers та Кешування](#service-workers-та-кешування)

## Основні Компоненти

### Рендеринговий Двигун
**Задача:** Перетворити отримані з мережі дані (HTML, CSS, зображення, шрифти, скрипти) у візуальне зображення на екрані.

- **Парсинг HTML:**  
  Аналіз HTML-коду для побудови DOM-дерева (Document Object Model), що є внутрішнім представленням структури документа.

- **Парсинг CSS:**  
  Обробка CSS-файлів для створення CSSOM-дерева (CSS Object Model), яке містить усі стилі, що застосовуються до DOM-елементів. Під час цього враховується специфічність селекторів, спадковість та каскадність правил.

- **Побудова Render Tree:**  
  Поєднання DOM та CSSOM у дерево відображення, яке включає лише видимі елементи з застосованими стилями.

- **Layout (Обчислення Макету):**  
  Розрахунок розташування і розмірів кожного елемента на сторінці, враховуючи CSS-властивості (відступи, поля, позиціонування).

- **Painting (Малювання):**  
  Відтворення вмісту на екрані: нанесення кольорів, шрифтів, фонів, тіней тощо. Може бути розбите на кілька шарів для оптимізації.

- **Compositing (Композиція):**  
  Об’єднання окремих шарів у фінальне зображення. Це дозволяє ефективно керувати анімаціями та динамічними змінами, не перераховуючи всю сторінку.

### JavaScript-Двигун
**Задача:** Виконання JavaScript-коду, що забезпечує динамічність та інтерактивність веб-сторінок.

- **Обробка Скриптів:**  
  Інтерпретація та виконання коду, який може змінювати DOM, додавати події або змінювати стилі.

- **Оптимізація:**  
  Використання технік JIT-компіляції (Just-In-Time) для пришвидшення виконання коду.

- **Взаємодія з Іншими Компонентами:**  
  Може ініціювати перерисовку (reflow/repaint) сторінки при зміні DOM або CSSOM.

### Мережева Підсистема
**Задача:** Завантаження ресурсів з мережі та забезпечення зв’язку з сервером.

- **Протоколи:**  
  Використання HTTP/HTTPS для передачі даних. При цьому HTTPS використовує TLS для забезпечення шифрованого з’єднання.

- **DNS:**  
  Перетворення доменних імен (наприклад, example.com) у числові IP-адреси, необхідні для встановлення мережевого з’єднання.

- **TLS:**  
  Протокол шифрування, який захищає дані під час їх передачі, забезпечуючи конфіденційність і цілісність.

### Модель Процесів та Потоків
**Задача:** Забезпечення стабільності та безпеки браузера через ізоляцію вкладок, розширень та інших компонентів.

- **Багатопроцесність:**  
  Кожна вкладка може працювати в окремому процесі, що ізолює її від інших. Це зменшує ризик збоїв.

- **Багатопотоковість:**  
  Розподіл завдань між потоками дозволяє ефективніше обробляти численні операції одночасно.

### Подієвий Цикл (Event Loop)
**Задача:** Забезпечити асинхронну обробку завдань та подій, щоб інтерфейс залишався чуйним.

- **Механізм:**  
  Постійне циклічне опитування черги подій для виконання колбеків після завершення асинхронних операцій (наприклад, завантаження даних, натискання кнопок).

- **Переваги:**  
  Дозволяє виконувати асинхронний код без блокування основного потоку, що забезпечує плавну роботу інтерфейсу.

### Зберігання Даних на Стороні Клієнта
**Механізми:**

- **Local Storage:**  
  Дозволяє зберігати великі об’єми даних у браузері на невизначений термін (до явного видалення). Дані зберігаються у форматі ключ-значення.

- **Session Storage:**  
  Зберігає дані протягом однієї сесії браузера. Після закриття вкладки або вікна дані автоматично видаляються.

- **Cookies:**  
  Невеликі текстові файли, що використовуються для збереження інформації про сесію, налаштувань користувача, відстеження активності або автентифікації. Cookies передаються разом із запитами до сервера.

---

## Ключові Терміни та Протоколи

### IP та DNS
- **IP (Internet Protocol):**  
  Унікальний числовий ідентифікатор, що призначається кожному пристрою в мережі. Завдяки IP-адресі маршрутизатори та сервери можуть правильно спрямовувати дані між пристроями.

- **DNS (Domain Name System):**  
  Система, яка перетворює зрозумілі для людини доменні імена (наприклад, google.com) у числові IP-адреси, необхідні для встановлення з’єднання.

### HTTP та HTTPS
- **HTTP (HyperText Transfer Protocol):**  
  Протокол, який використовується для передачі гіпертекстових документів. Він визначає правила запитів та відповідей між клієнтом і сервером.

- **HTTPS (HTTP Secure):**  
  Захищена версія HTTP, що використовує TLS для шифрування даних, забезпечуючи конфіденційність та захист від перехоплення.

### TLS
- **TLS (Transport Layer Security):**  
  Криптографічний протокол, який гарантує безпечну передачу даних між клієнтом і сервером за допомогою шифрування та автентифікації.

### HTTP: Заголовки та Тіло
- **Заголовки (Headers):**  
  Метадані, що супроводжують HTTP-запити та відповіді. Вони містять інформацію про тип контенту, автентифікацію, параметри кешування, куки, дані про браузер тощо.

- **Тіло (Body):**  
  Основна частина запиту або відповіді, яка містить корисні дані: HTML-код, зображення, JSON, дані форм тощо.

---

## Структура HTTP-Запиту та Відповіді

### HTTP-Запит
- **Метод Запиту:**  
  Визначає тип операції (наприклад, GET для отримання даних, POST для відправки даних, PUT, DELETE, PATCH для модифікації).

- **Запитний Рядок:**  
  Складається з методу, URI (універсального ідентифікатора ресурсу) та версії протоколу (наприклад, HTTP/1.1).

- **Заголовки:**  
  Метадані, що описують властивості запиту (тип контенту, інформація про клієнта, параметри кешування тощо).

- **Тіло Запиту:**  
  Дані, які надсилаються на сервер, наприклад, інформація з форм або JSON-об’єкти.

### HTTP-Відповідь
- **Статусний Рядок:**  
  Містить версію протоколу, статусний код (наприклад, 200, 404, 500) та короткий опис статусу.

- **Заголовки Відповіді:**  
  Надають інформацію про тип контенту, розмір, дату, кешування, сервер тощо.

- **Тіло Відповіді:**  
  Основний вміст, який передається клієнту — HTML-документ, зображення, JSON, текст тощо.

---

## Детальний Процес Рендерингу Веб-Сторінки

### 1. Отримання Ресурсів
- **HTTP-запит:**  
  Браузер надсилає запит до сервера для завантаження HTML-документа.
  
- **Паралельне Завантаження:**  
  Після отримання HTML браузер одночасно завантажує супутні ресурси (CSS, JavaScript, зображення, шрифти) для пришвидшення відтворення сторінки.

### 2. Парсинг HTML та Побудова DOM-дерева
- **Аналіз HTML:**  
  Браузер розбирає HTML-код і будує DOM-дерево, яке є внутрішнім представленням структури документа.
  
- **Блокування Скриптів:**  
  Якщо в HTML знаходяться блоки JavaScript, парсинг може тимчасово зупинятися до виконання скриптів, що може вплинути на продуктивність.

### 3. Парсинг CSS та Побудова CSSOM-дерева
- **Аналіз CSS:**  
  Завантажені CSS-файли розбираються, після чого формується CSSOM-дерево.
  
- **Розрахунок Специфічності:**  
  Під час побудови враховуються спадковість, специфічність селекторів та принципи каскаду, що визначають остаточні стилі для кожного елемента.

### 4. Побудова Render Tree
- **Об’єднання DOM та CSSOM:**  
  Створюється дерево відображення, яке включає лише ті елементи, що мають візуальне представлення. Воно відкидає невидимі (наприклад, `display: none`) елементи.

### 5. Layout (Обчислення Макету)
- **Розрахунок Положення:**  
  Браузер проходить по Render Tree та визначає точні позиції і розміри кожного елемента з урахуванням CSS-властивостей (відступів, полів, розмірів, позиціонування).
  
- **Reflow:**  
  У разі змін у DOM або CSSOM відбувається повторний розрахунок макету (reflow), що може вплинути на продуктивність.

### 6. Painting (Малювання)
- **Нанесення Стилів:**  
  Після розрахунку макету браузер малює кожен елемент, використовуючи інформацію про кольори, фони, шрифти, тіні та інші візуальні ефекти.
  
- **Шари:**  
  Малювання може відбуватися по шарах, що дозволяє ізолювати окремі частини сторінки для оптимізації перерисовування.

### 7. Compositing (Композиція)
- **Об’єднання Шарів:**  
  Якщо сторінка розбита на кілька шарів (наприклад, через CSS-анімації чи трансформації), браузер об’єднує їх у фінальне зображення. Це дозволяє змінювати окремі шари без перерахунку всього вмісту.

### 8. Виконання JavaScript та Оновлення DOM
- **Виконання Скриптів:**  
  Після початкового рендерингу браузер виконує JavaScript-код, який може змінювати DOM або CSSOM. Зміни можуть спричиняти повторний розрахунок макету (reflow) або перерисування (repaint).
  
- **Взаємодія:**  
  JavaScript може маніпулювати подіями, додавати інтерактивні елементи або оновлювати дані через асинхронні запити.

### 9. Асинхронні Операції
- **AJAX та Fetch API:**  
  Дозволяють завантажувати дані у фоновому режимі без повного перезавантаження сторінки, забезпечуючи більш плавний користувацький досвід.
  
- **WebSocket:**  
  Забезпечує двосторонній зв’язок між клієнтом і сервером через постійне TCP-з’єднання, що дозволяє обом сторонам надсилати дані в режимі реального часу.

---

## Додаткові Механізми та Оптимізації

### Service Workers та Кешування
- **Service Workers:**  
  Призначені для роботи у фоновому режимі. Вони перехоплюють мережеві запити, дозволяють кешувати ресурси та забезпечують роботу додатків в режимі офлайн.
  
- **Кешування:**  
  За допомогою різних стратегій (наприклад, stale-while-revalidate) кешуються статичні ресурси для прискорення завантаження сторінок.

